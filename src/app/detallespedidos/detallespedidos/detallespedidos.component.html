<div class="d-flex">
  <app-menu></app-menu>
  <div class="flex-grow-1 p-5 text-white" style="font-family: 'Inter', sans-serif; background-color: #233a59;">
    <div class="mb-4">
      <h1 class="display-3 fs-1 fw-bold mb-3">Detalles del Pedido</h1>
    </div>

    <div *ngIf="pedido" class="card mb-4 border-0 shadow-sm" style="background-color: #2d3e5e;">
      <div class="card-body p-0">
        <table class="table table-hover table-borderless mb-0">
          <thead class="thead-dark" style="background-color: #1c2a3f;">
          <tr>
            <th class="py-3">#</th>
            <th class="py-3">Nombre del Producto</th>
            <th class="py-3">Categorías</th>
            <th class="py-3">Cantidad</th>
            <th class="py-3">Precio por Unidad</th>
            <th class="py-3">Precio Total</th>
          </tr>
          </thead>
          <tbody>
          <!-- Loop through products -->
          <tr *ngFor="let producto of pedido.productos ?? []; let i = index" class="align-middle">
            <td>{{ i + 1 }}</td>
            <td>{{ producto?.nombre }}</td>
            <td>
              <ul class="list-unstyled mb-0">
                <li *ngFor="let categoria of producto?.categorias ?? []" class="badge bg-secondary me-1">
                  {{ categoria?.nombre }}
                </li>
              </ul>
            </td>
            <td>{{ producto?.cantidad }}</td>
            <td>{{ producto?.precioUd | currency:'EUR' }}</td>
            <td>{{ producto?.precioTotal | currency:'EUR' }}</td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Supplier Information -->
    <div>
      <h3 class="h4 fw-bold mb-4">Información de Proveedor</h3>
      <div class="mb-4">
        <div class="card provider-card border-0 shadow-sm" style="background-color: #2d3e5e;">
          <div class="card-body">
            <h5 class="card-title fw-bold mb-3" style="color: #ffffff;">
              Proveedor: {{ pedido.productos[0]?.proveedor?.nombre }}
            </h5>
            <div class="row" style="color: white;">
              <div class="col-md-6">
                <ul class="list-unstyled">
                  <li class="mb-2"><strong>Correo:</strong> {{ pedido.productos[0]?.proveedor?.correo }}</li>
                  <li class="mb-2"><strong>Teléfono:</strong> {{ pedido.productos[0]?.proveedor?.telefono }}</li>
                </ul>
              </div>
              <div class="col-md-6">
                <ul class="list-unstyled">
                  <li class="mb-2"><strong>Dirección:</strong> {{ pedido.productos[0]?.proveedor?.direccion }}</li>
                  <li class="mb-2"><strong>País:</strong> {{ pedido.productos[0]?.proveedor?.pais }}</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Order Summary -->
    <div *ngIf="pedido" class="row mb-4">
      <div class="col-md-6">
        <div class="p-4 rounded-3 shadow-sm" style="background-color: #2d3e5e;">
          <h5 class="fw-bold mb-3">Fecha del Pedido</h5>
          <p class="mb-4">{{ pedido.fechaPedido | date:'mediumDate' }}</p>
          <h5 class="fw-bold mb-3">Total del Pedido</h5>
          <p class="h4 fw-bold" style="color: #8da2c3;">{{ pedido.costeTotal | currency:'EUR' }}</p>
        </div>
      </div>
    </div>

    <!-- Back Button -->
    <button class="btn btn-primary btn-lg" (click)="router.navigate(['pedidos/'])">
      <i class="bi bi-arrow-left me-2"></i> Volver
    </button>
  </div>
</div>
